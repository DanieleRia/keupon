
<style type="text/css">
    .form-label{
        width:150px !important;
    }
    .form-label-left{
        width:250px !important;
    }
    .form-line{
        padding:10px;
    }
    .form-label-right{
        width:150px !important;
    }
    .form-all{
        width:650px;
        background:url("img/style4_2_bg.gif") repeat-x scroll center top rgb(54, 53, 53);
        color:white !important;
        font-family:"Trebuchet MS";
        font-size:12px;
    }
</style>

<script type="text/javascript">
   JotForm.init();
</script>

<script type="text/javascript">

function call_offers(deal, status){
  if(status == "offered" || status == "accepted"){
    location.href='/offered_deals?deal='+deal;
  }
  else{
    new Ajax.Request('/customers/want_a_deal?id='+deal, {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('f7451406a5f3527c920b15eb7f63840280305729')});
  }
}

function setButtonStatus(status){
  var theForm = document.forms['2730422465'];
  theForm.button_status.value = status;
}

</script>

<script Language="JavaScript">
<!--
function form_validator(){
var theForm = document.forms['2730422465'];
var i;
if (theForm.description.value == "" || theForm.description.value.length < 1)
{
alert("You must Describe the Keupon that you are looking for.");
theForm.description.focus();
return (false);
}

if (theForm.price.value == "" || theForm.price.value.length < 1)
{
alert("You must enter Price.");
theForm.price.focus();
return (false);
}
else if(!IsNumeric(theForm.price.value)){
  alert("You must enter only Numeric value for Price.");
  theForm.price.focus();
  return (false);
}

if (theForm.quantity.value == "" || theForm.quantity.value.length < 1)
{
alert("You must enter the number of Keupons that you will buy.");
theForm.quantity.focus();
return (false);
}
else if(!IsNumeric(theForm.quantity.value)){
  alert("You must enter only Numeric value for number of Keupons.");
  theForm.quantity.focus();
  return (false);
}


if (theForm.deadline.value == "" || theForm.deadline.value.length < 1)
{
alert("You must pick the Date by when you are expecting a response for this Deal.");
theForm.deadline.focus();
return (false);
}else if(!checkDate(theForm.deadline)){
  theForm.deadline.focus();
  return (false);
}

if (theForm.category.selectedIndex == '0')
{
alert("You must Categorize your Keupon.");
theForm.category.focus();
return (false);
}

if (theForm.sub_category.selectedIndex == '0')
{
alert("You must Sub-Categorize your Keupon.");
theForm.sub_category.focus();
return (false);
}

theForm.onsubmit();
}

function checkDate(field) {
  var minYear = 1902;
  var maxYear = (new Date()).getFullYear();
  var errorMsg = ""; // regular expression to match required date format
  re = /^(\d{1,2})\/(\d{1,2})\/(\d{4})$/;
  if(field.value != '') {
    if(regs = field.value.match(re)) {
      if(regs[1] < 1 || regs[1] > 31) {
        errorMsg = "Invalid value for day: " + regs[1];
      } else if(regs[2] < 1 || regs[2] > 12) {
        errorMsg = "Invalid value for month: " + regs[2];
      } else if(regs[3] < minYear || regs[3] > maxYear) {
        errorMsg = "Invalid value for year: " + regs[3] + " - must be between " + minYear + " and " + maxYear;
      }
    } else {
      errorMsg = "Invalid date format: " + field.value;
    }
  } 
  if(errorMsg != "") {
    alert(errorMsg); return false;
  } 
}

function IsNumeric(sText)

{
   var ValidChars = "0123456789.";
   var IsNumber=true;
   var Char;


   for (i = 0; i < sText.length && IsNumber == true; i++)
      {
      Char = sText.charAt(i);
      if (ValidChars.indexOf(Char) == -1)
         {
         IsNumber = false;
         }
      }
   return IsNumber;

}


//-->
</script>

<div id="userform">
  <%= render :partial => "i_want_deal_form" %>
</div>
<div id="userform2">
  <%= render :partial => "my_demand_deals_summary" %>
</div>